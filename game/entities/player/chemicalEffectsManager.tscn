[gd_scene load_steps=9 format=3 uid="uid://c5yieglatmln5"]

[ext_resource type="Script" path="res://entities/player/chemicalEffects/ChemicalStateManager.gd" id="1_2rtau"]
[ext_resource type="Script" path="res://entities/player/chemicalEffects/IceState.gd" id="2_06vjv"]
[ext_resource type="Script" path="res://addons/godot_state_charts/state_chart.gd" id="3_aywlr"]
[ext_resource type="Script" path="res://addons/godot_state_charts/compound_state.gd" id="4_qh1hq"]
[ext_resource type="Script" path="res://addons/godot_state_charts/atomic_state.gd" id="5_wf780"]
[ext_resource type="Script" path="res://addons/godot_state_charts/transition.gd" id="6_llpey"]
[ext_resource type="Script" path="res://addons/godot_state_charts/expression_guard.gd" id="7_538kr"]

[sub_resource type="Resource" id="Resource_ir01r"]
script = ExtResource("7_538kr")
expression = "active_chemical == \"ice\""

[node name="ChemicalEffectsManager" type="Node2D"]
script = ExtResource("1_2rtau")

[node name="Effects" type="Node2D" parent="."]

[node name="Ice" type="Node2D" parent="Effects"]
script = ExtResource("2_06vjv")

[node name="ChemicalStateChart" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("3_aywlr")

[node name="Chemicals" type="Node" parent="ChemicalStateChart"]
script = ExtResource("4_qh1hq")
initial_state = NodePath("Water")

[node name="Water" type="Node" parent="ChemicalStateChart/Chemicals"]
unique_name_in_owner = true
script = ExtResource("5_wf780")

[node name="On Melt" type="Node" parent="ChemicalStateChart/Chemicals/Water"]
script = ExtResource("6_llpey")
to = NodePath("..")
event = &"melt"

[node name="Ice" type="Node" parent="ChemicalStateChart/Chemicals"]
unique_name_in_owner = true
script = ExtResource("5_wf780")

[node name="On Ice" type="Node" parent="ChemicalStateChart/Chemicals"]
script = ExtResource("6_llpey")
to = NodePath("../Ice")
event = &"to_chemical"
guard = SubResource("Resource_ir01r")

[node name="On Default" type="Node" parent="ChemicalStateChart/Chemicals"]
script = ExtResource("6_llpey")
to = NodePath("../Water")
event = &"to_default"

[connection signal="state_entered" from="ChemicalStateChart/Chemicals/Ice" to="Effects/Ice" method="_on_ice_state_entered"]
[connection signal="state_exited" from="ChemicalStateChart/Chemicals/Ice" to="Effects/Ice" method="_on_ice_state_exited"]
